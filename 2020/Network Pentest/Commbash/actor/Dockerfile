FROM ubuntu:18.04 as build

RUN apt-get update && \
    apt-get -y install xinetd python

RUN mkdir -p /opt/actor
COPY actor.py /opt/actor/actor.py
COPY actor.sh /opt/actor/actor.sh
RUN chmod +x /opt/actor/actor.sh
COPY actor /etc/xinetd.d/actor
COPY flag.txt /root/flag.txt

EXPOSE 8989

ENTRYPOINT [ "xinetd", "-dontfork" ]